<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tour Route Map • Spiritual Services</title>

  <link rel="stylesheet" href="assets/css/theme-saffron.css" />
  <link rel="stylesheet" href="assets/css/experiences.css" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    .pp-route-wrap{display:grid; grid-template-columns: 1.25fr .75fr; gap:14px}
    #routeMap{height: 72vh; min-height: 520px; border-radius: var(--r); overflow:hidden; border:1px solid var(--border); box-shadow: var(--shadow); background:var(--card)}
    .pp-input{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background: rgba(255,255,255,.85)}
    html[data-theme="dark"] .pp-input{background: rgba(17,24,39,.75); color: var(--ink)}
    .pp-row{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap}
    .pp-list{display:grid; gap:10px}
    .pp-stop{border:1px solid var(--border); background: rgba(255,255,255,.70); border-radius:16px; padding:12px}
    html[data-theme="dark"] .pp-stop{background: rgba(17,24,39,.60)}
    .pp-stop h3{margin:0 0 6px; font-size:15px}
    .pp-stop .pp-muted{font-weight:700}
    .pp-stop-actions{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
    .pp-num{display:inline-flex; align-items:center; justify-content:center; width:26px; height:26px; border-radius:999px;
      background: linear-gradient(180deg, var(--brand), var(--brand2)); color:#fff; font-weight:900; font-size:13px; margin-right:8px}
    @media (max-width: 980px){
      .pp-route-wrap{grid-template-columns:1fr}
      #routeMap{height: 52vh; min-height: 420px}
    }
  </style>
</head>
<body>
  <div data-include="includes/header.html"></div>

  <main class="pp-container pp-main">
    <section class="pp-panel">
      <h1 class="pp-h1" style="margin:0 0 6px">Tour Route Map</h1>
      <div class="pp-muted">
        This page draws your <b>Tour Maker</b> itinerary on a map, connects stops in order, and calculates total distance.
        You can reorder stops, auto-sort, and share the route on WhatsApp.
      </div>
      <div class="pp-row" style="margin-top:10px">
        <div class="pp-actions">
          <a class="pp-btn pp-btn-outline" href="tour-maker.html">Back to Tour Maker</a>
          <button class="pp-btn" id="btnAutoSort" type="button">Auto-sort (nearest)</button>
          <button class="pp-btn pp-btn-outline" id="btnLocateStart" type="button">Start from Current Location</button>
        </div>
        <div class="pp-muted" id="summary"></div>
      </div>
    </section>

    <div class="pp-route-wrap">
      <div id="routeMap" aria-label="Route map"></div>

      <aside style="display:flex; flex-direction:column; gap:12px">
        <section class="pp-panel">
          <div class="pp-row">
            <div>
              <div class="pp-h2" style="margin:0">Stops</div>
              <div class="pp-muted" style="font-size:13px">Order matters. Use ↑ ↓ to rearrange.</div>
            </div>
            <div class="pp-actions">
              <button class="pp-btn pp-btn-outline" id="btnClear" type="button">Clear</button>
              <a class="pp-btn" id="btnShare" target="_blank" rel="noopener">Share on WhatsApp</a>
            </div>
          </div>
          <div id="stopList" class="pp-list" style="margin-top:10px"></div>
        </section>

        <section class="pp-panel">
          <div class="pp-h2" style="margin:0 0 6px">Download</div>
          <div class="pp-muted" style="font-size:13px">Save your route JSON for backup or sharing.</div>
          <div class="pp-actions" style="margin-top:10px">
            <button class="pp-btn" id="btnDownload" type="button">Download Route JSON</button>
          </div>
        </section>
      </aside>
    </div>
  </main>

  <div data-include="includes/footer.html"></div>

  <script src="assets/js/includes.js"></script>
  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/theme.js"></script>
  <script src="assets/js/featured.js"></script>
  <script src="assets/js/route-map.js"></script>

  <script src="https://programmer-s-picnic.github.io/json-images/find-on-page.js"></script>
</body>
</html>
